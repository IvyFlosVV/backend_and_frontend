v<style>
    /* 1. The Vibrant Flowing Background */
    body, html {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        /* Pumped up pastel colors: Blue, Pink, Purple, Yellow */
        background: linear-gradient(-45deg, #a1c4fd, #ffb6c1, #cda1ff, #fcf6bd);
        background-size: 400% 400%;
        animation: liquidFlow 10s ease infinite;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    @keyframes liquidFlow {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    /* 2. Frosted Glass Window */
    #ivy-bot-container {
        width: 450px;
        height: 600px;
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 24px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }

    /* 3. Subtle Scrollbar */
    #chat-display::-webkit-scrollbar { width: 6px; }
    #chat-display::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.5); border-radius: 10px; }
</style>

<div id="ivy-bot-container">
    <div style="padding: 16px 20px; background: rgba(255, 255, 255, 0.4); border-bottom: 1px solid rgba(255, 255, 255, 0.5); display: flex; align-items: center; gap: 8px;">
        <div style="width: 12px; height: 12px; background: #ff5f56; border-radius: 50%;"></div>
        <div style="width: 12px; height: 12px; background: #ffbd2e; border-radius: 50%;"></div>
        <div style="width: 12px; height: 12px; background: #27c93f; border-radius: 50%;"></div>
        <span style="font-family: 'JetBrains Mono', monospace; font-size: 13px; color: #444; margin-left: auto; font-weight: bold;">ivy_ai.exe</span>
    </div>

    <div id="chat-display" style="flex-grow: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px;">
        <div style="align-self: flex-start; max-width: 85%; padding: 12px 16px; background: rgba(255, 255, 255, 0.85); color: #333; border-radius: 20px 20px 20px 5px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); font-size: 14px; line-height: 1.4;">
            Hi there! I'm the AI version of Ivy. Want to know about my latest projects in Stats & ML, or my thoughts on the humanities? Ask away!
        </div>
    </div>

    <div style="padding: 20px; background: rgba(255, 255, 255, 0.4); border-top: 1px solid rgba(255, 255, 255, 0.5); display: flex; gap: 10px;">
        <input type="text" id="user-msg" placeholder="Ask me something..." style="
            flex-grow: 1; 
            padding: 12px 20px; 
            border-radius: 25px; 
            border: 1px solid rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.6);
            outline: none;
            font-size: 14px;
            color: #333;">
        
        <button onclick="askIvy()" id="send-btn" style="
            background: rgba(255, 255, 255, 0.9); 
            color: #444; 
            border: 1px solid rgba(255,255,255,1); 
            padding: 0 20px; 
            border-radius: 25px; 
            cursor: pointer;
            font-weight: 700;
            font-size: 12px;">
            SEND
        </button>
    </div>
    <p id="status-msg" style="font-size: 11px; color: #555; text-align: center; margin-bottom: 12px; display: none; font-family: 'JetBrains Mono', monospace;">
        Thinking...
    </p>
</div>

<script>
async function askIvy() {
    const input = document.getElementById('user-msg');
    const display = document.getElementById('chat-display');
    const status = document.getElementById('status-msg');
    const btn = document.getElementById('send-btn');
    const message = input.value.trim();

    if (!message) return;

    // User Message Bubble (Glassy Dark)
    display.innerHTML += `
        <div style="align-self: flex-end; max-width: 85%; padding: 12px 16px; background: rgba(0, 0, 0, 0.6); color: white; border-radius: 20px 20px 5px 20px; font-size: 14px; backdrop-filter: blur(5px);">
            ${message}
        </div>`;
    
    input.value = '';
    status.style.display = 'block';
    btn.disabled = true;
    display.scrollTop = display.scrollHeight;

    try {
        const response = await fetch('https://backend-and-frontend-3clh.onrender.com/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: message })
        });
        const data = await response.json();
        
        if (data.reply) {
            display.innerHTML += `
                <div style="align-self: flex-start; max-width: 85%; padding: 12px 16px; background: rgba(255, 255, 255, 0.85); color: #333; border-radius: 20px 20px 20px 5px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); font-size: 14px; line-height: 1.4;">
                    ${data.reply}
                </div>`;
        }
    } catch (err) {
        display.innerHTML += `<div style="color: #ff5f56; font-size: 12px; text-align: center; font-weight: bold;">Connection error.</div>`;
    } finally {
        status.style.display = 'none';
        btn.disabled = false;
        display.scrollTop = display.scrollHeight;
    }
}

document.getElementById('user-msg').addEventListener('keypress', (e) => { if(e.key === 'Enter') askIvy(); });
</script>